{"ast":null,"code":"const GITHUB_TOKEN_KEY = \"x-github-token\";\nconst storage = chrome.storage.sync || chrome.storage.local;\nlet prInfo = [];\nchrome.runtime.onMessage.addListener(function (request, sender, sendResponse) {\n  var senderTab = sender.tab;\n  if (senderTab != null) {\n    //var senderWindowId = sender.tab.windowId;\n  }\n  if (request.msg[0] == \"openStriffWindow\") {\n    prInfo = request.msg[1];\n    chrome.windows.create({\n      url: \"striff-report.html\",\n      type: \"popup\"\n    });\n  } else if (request.msg[0] == \"setToken\") {\n    setGithubToken(request.msg[1]);\n    sendResponse(true);\n  } else if (request.msg[0] == \"getToken\") {\n    storage.get(GITHUB_TOKEN_KEY, function (data) {\n      var githubToken = data[GITHUB_TOKEN_KEY];\n      sendResponse(githubToken);\n    });\n  } else if (request.msg[0] == \"getPRInfo\") {\n    sendResponse(prInfo);\n  }\n  return true;\n});\nfunction setGithubToken(value) {\n  const obj = {};\n  obj[GITHUB_TOKEN_KEY] = value;\n  storage.set(obj);\n}","map":{"version":3,"names":["GITHUB_TOKEN_KEY","storage","chrome","sync","local","prInfo","runtime","onMessage","addListener","request","sender","sendResponse","senderTab","tab","msg","windows","create","url","type","setGithubToken","get","data","githubToken","value","obj","set"],"sources":["/home/muntazir/git/hadii/striff-browser-extension/src/entry/background.js"],"sourcesContent":["\nconst GITHUB_TOKEN_KEY = \"x-github-token\";\nconst storage = chrome.storage.sync || chrome.storage.local;\nlet prInfo = []\n\nchrome.runtime.onMessage.addListener(function (\n  request,\n  sender,\n  sendResponse\n) {\n  var senderTab = sender.tab\n  if (senderTab != null) {\n    //var senderWindowId = sender.tab.windowId;\n  }\n  if (request.msg[0] == \"openStriffWindow\") {\n    prInfo = request.msg[1]\n    chrome.windows.create({url: \"striff-report.html\", type: \"popup\"});\n  } else if (request.msg[0] == \"setToken\") {\n    setGithubToken(request.msg[1])\n    sendResponse(true);\n  } else if (request.msg[0] == \"getToken\") {\n    storage.get(GITHUB_TOKEN_KEY, function (data) {\n      var githubToken = data[GITHUB_TOKEN_KEY];\n      sendResponse(githubToken);\n    });\n  } else if (request.msg[0] == \"getPRInfo\") {\n    sendResponse(prInfo);    \n  } \n  return true;\n});\n\nfunction setGithubToken(value) {\n  const obj = {};\n  obj[GITHUB_TOKEN_KEY] = value;\n  storage.set(obj)\n}\n\n"],"mappings":"AACA,MAAMA,gBAAgB,GAAG,gBAAgB;AACzC,MAAMC,OAAO,GAAGC,MAAM,CAACD,OAAO,CAACE,IAAI,IAAID,MAAM,CAACD,OAAO,CAACG,KAAK;AAC3D,IAAIC,MAAM,GAAG,EAAE;AAEfH,MAAM,CAACI,OAAO,CAACC,SAAS,CAACC,WAAW,CAAC,UACnCC,OAAO,EACPC,MAAM,EACNC,YAAY,EACZ;EACA,IAAIC,SAAS,GAAGF,MAAM,CAACG,GAAG;EAC1B,IAAID,SAAS,IAAI,IAAI,EAAE;IACrB;EAAA;EAEF,IAAIH,OAAO,CAACK,GAAG,CAAC,CAAC,CAAC,IAAI,kBAAkB,EAAE;IACxCT,MAAM,GAAGI,OAAO,CAACK,GAAG,CAAC,CAAC,CAAC;IACvBZ,MAAM,CAACa,OAAO,CAACC,MAAM,CAAC;MAACC,GAAG,EAAE,oBAAoB;MAAEC,IAAI,EAAE;IAAO,CAAC,CAAC;EACnE,CAAC,MAAM,IAAIT,OAAO,CAACK,GAAG,CAAC,CAAC,CAAC,IAAI,UAAU,EAAE;IACvCK,cAAc,CAACV,OAAO,CAACK,GAAG,CAAC,CAAC,CAAC,CAAC;IAC9BH,YAAY,CAAC,IAAI,CAAC;EACpB,CAAC,MAAM,IAAIF,OAAO,CAACK,GAAG,CAAC,CAAC,CAAC,IAAI,UAAU,EAAE;IACvCb,OAAO,CAACmB,GAAG,CAACpB,gBAAgB,EAAE,UAAUqB,IAAI,EAAE;MAC5C,IAAIC,WAAW,GAAGD,IAAI,CAACrB,gBAAgB,CAAC;MACxCW,YAAY,CAACW,WAAW,CAAC;IAC3B,CAAC,CAAC;EACJ,CAAC,MAAM,IAAIb,OAAO,CAACK,GAAG,CAAC,CAAC,CAAC,IAAI,WAAW,EAAE;IACxCH,YAAY,CAACN,MAAM,CAAC;EACtB;EACA,OAAO,IAAI;AACb,CAAC,CAAC;AAEF,SAASc,cAAc,CAACI,KAAK,EAAE;EAC7B,MAAMC,GAAG,GAAG,CAAC,CAAC;EACdA,GAAG,CAACxB,gBAAgB,CAAC,GAAGuB,KAAK;EAC7BtB,OAAO,CAACwB,GAAG,CAACD,GAAG,CAAC;AAClB"},"metadata":{},"sourceType":"script","externalDependencies":[]}