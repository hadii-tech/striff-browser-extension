{"ast":null,"code":"window.addEventListener(\"load\", main, false);\nfunction main() {\n  let repoURI = window.location.pathname.substring(1);\n  if (repoURI.match(/.*\\/pull\\/[0-9]*/) && window.location.href.includes(\"github.com\")) {\n    // Current page is GitHub Pull Request, retrieve important values\n    var repoOwner = window.location.pathname.split(\"/\")[1];\n    var repoName = window.location.pathname.split(\"/\")[2];\n    var pullNo = window.location.pathname.split(\"/\")[4];\n    // Create striff button\n    if (document.getElementsByClassName(\"tabnav-tabs\")) {\n      var striffTabNav = document.getElementById(\"striffTabNav\");\n      if (striffTabNav == null) {\n        var ghTabNavs = document.getElementsByClassName(\"tabnav-tabs\")[0];\n        var imageURL = chrome.runtime.getURL(\"assets/logo.png\");\n        ghTabNavs.innerHTML += '<button type=\"submit\" class=\"btn btn-sm btn-with-count js-toggler-target\" aria-label=\"View striff diagrams for this pull request.\" title=\"View striff diagrams for this pull request.\" id=\"striff_btn\" style=\"margin-left: 15px;padding-left: 5px; min-width:110px; padding-right:15px; overflow: hidden; border-radius: 5px; margin-bottom: 10px; margin-top: 7px; background-color: #f3f3f3; float: right; margin-left: auto;\"> <div id=\"striff_btn_div\" style=\"margin-right: 5px; margin-left: 5px;\"><div id=\"striff_btn_icon_div\"><img style=\"float:left; display:block; margin-top: 2px;margin-bottom: -2px;margin-right: 5px;\" id=\"structure_diff_btn_img\" src=\"' + imageURL + '\"></div><span style=\"padding-right: 5px;\" id=\"striff_btn_text\">Striff Report</span></div></button>';\n      }\n      // create event listener for the structure-diff button\n      var striffBtn = document.getElementById(\"striff_btn\");\n      striffBtn.addEventListener(\"click\", function () {\n        showLoaderBtnIcon();\n        // start generating structure-diff...\n        fetchStriffMetadata(repoOwner, repoName, pullNo);\n      });\n    }\n  }\n}\n;\nconst updateStriffBtn = (btnText, hoverText, status) => {\n  var striffBtn = document.getElementById(\"striff_btn\");\n  striffBtn.setAttribute(\"aria-label\", hoverText);\n  striffBtn.setAttribute(\"title\", hoverText);\n  var striffBtnText = document.getElementById(\"striff_btn_text\");\n  striffBtnText.innerHTML = btnText;\n  setButtonIcon(status);\n};\nconst displayStriffs = striffRespJson => {\n  chrome.extension.sendMessage({\n    msg: [\"openStriffTab\", generateStriffHTML(striffRespJson)]\n  });\n};","map":{"version":3,"names":["window","addEventListener","main","repoURI","location","pathname","substring","match","href","includes","repoOwner","split","repoName","pullNo","document","getElementsByClassName","striffTabNav","getElementById","ghTabNavs","imageURL","chrome","runtime","getURL","innerHTML","striffBtn","showLoaderBtnIcon","fetchStriffMetadata","updateStriffBtn","btnText","hoverText","status","setAttribute","striffBtnText","setButtonIcon","displayStriffs","striffRespJson","extension","sendMessage","msg","generateStriffHTML"],"sources":["/home/muntazir/git/hadii/striff-browser-extension/src/entry/pull-request.js"],"sourcesContent":["window.addEventListener (\"load\", main, false);\n\nfunction main () {\n  let repoURI = window.location.pathname.substring(1);\n  if (\n    repoURI.match(/.*\\/pull\\/[0-9]*/) &&\n    window.location.href.includes(\"github.com\")\n  ) {\n    // Current page is GitHub Pull Request, retrieve important values\n    var repoOwner = window.location.pathname.split(\"/\")[1];\n    var repoName = window.location.pathname.split(\"/\")[2];\n    var pullNo = window.location.pathname.split(\"/\")[4];\n    // Create striff button\n    if (document.getElementsByClassName(\"tabnav-tabs\")) {\n        var striffTabNav = document.getElementById(\"striffTabNav\");\n        if (striffTabNav == null) {\n            var ghTabNavs = document.getElementsByClassName(\"tabnav-tabs\")[0];\n            var imageURL = chrome.runtime.getURL(\"assets/logo.png\");\n            ghTabNavs.innerHTML +=\n            '<button type=\"submit\" class=\"btn btn-sm btn-with-count js-toggler-target\" aria-label=\"View striff diagrams for this pull request.\" title=\"View striff diagrams for this pull request.\" id=\"striff_btn\" style=\"margin-left: 15px;padding-left: 5px; min-width:110px; padding-right:15px; overflow: hidden; border-radius: 5px; margin-bottom: 10px; margin-top: 7px; background-color: #f3f3f3; float: right; margin-left: auto;\"> <div id=\"striff_btn_div\" style=\"margin-right: 5px; margin-left: 5px;\"><div id=\"striff_btn_icon_div\"><img style=\"float:left; display:block; margin-top: 2px;margin-bottom: -2px;margin-right: 5px;\" id=\"structure_diff_btn_img\" src=\"' +\n            imageURL +\n            '\"></div><span style=\"padding-right: 5px;\" id=\"striff_btn_text\">Striff Report</span></div></button>';\n        }\n        // create event listener for the structure-diff button\n        var striffBtn = document.getElementById(\"striff_btn\");\n        striffBtn.addEventListener(\"click\", function () {\n            showLoaderBtnIcon();\n            // start generating structure-diff...\n            fetchStriffMetadata(repoOwner, repoName, pullNo);\n        });\n    }\n  }\n};\n\nconst updateStriffBtn = (btnText, hoverText, status) => {\n  var striffBtn = document.getElementById(\"striff_btn\");\n  striffBtn.setAttribute(\"aria-label\", hoverText);\n  striffBtn.setAttribute(\"title\", hoverText);\n  var striffBtnText = document.getElementById(\"striff_btn_text\");\n  striffBtnText.innerHTML = btnText;\n  setButtonIcon(status);\n};\n\nconst displayStriffs = (striffRespJson) => {\n  chrome.extension.sendMessage({\n    msg: [\"openStriffTab\", generateStriffHTML(striffRespJson)],\n  });\n};\n"],"mappings":"AAAAA,MAAM,CAACC,gBAAgB,CAAE,MAAM,EAAEC,IAAI,EAAE,KAAK,CAAC;AAE7C,SAASA,IAAI,GAAI;EACf,IAAIC,OAAO,GAAGH,MAAM,CAACI,QAAQ,CAACC,QAAQ,CAACC,SAAS,CAAC,CAAC,CAAC;EACnD,IACEH,OAAO,CAACI,KAAK,CAAC,kBAAkB,CAAC,IACjCP,MAAM,CAACI,QAAQ,CAACI,IAAI,CAACC,QAAQ,CAAC,YAAY,CAAC,EAC3C;IACA;IACA,IAAIC,SAAS,GAAGV,MAAM,CAACI,QAAQ,CAACC,QAAQ,CAACM,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;IACtD,IAAIC,QAAQ,GAAGZ,MAAM,CAACI,QAAQ,CAACC,QAAQ,CAACM,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;IACrD,IAAIE,MAAM,GAAGb,MAAM,CAACI,QAAQ,CAACC,QAAQ,CAACM,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;IACnD;IACA,IAAIG,QAAQ,CAACC,sBAAsB,CAAC,aAAa,CAAC,EAAE;MAChD,IAAIC,YAAY,GAAGF,QAAQ,CAACG,cAAc,CAAC,cAAc,CAAC;MAC1D,IAAID,YAAY,IAAI,IAAI,EAAE;QACtB,IAAIE,SAAS,GAAGJ,QAAQ,CAACC,sBAAsB,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;QACjE,IAAII,QAAQ,GAAGC,MAAM,CAACC,OAAO,CAACC,MAAM,CAAC,iBAAiB,CAAC;QACvDJ,SAAS,CAACK,SAAS,IACnB,woBAAwoB,GACxoBJ,QAAQ,GACR,oGAAoG;MACxG;MACA;MACA,IAAIK,SAAS,GAAGV,QAAQ,CAACG,cAAc,CAAC,YAAY,CAAC;MACrDO,SAAS,CAACvB,gBAAgB,CAAC,OAAO,EAAE,YAAY;QAC5CwB,iBAAiB,EAAE;QACnB;QACAC,mBAAmB,CAAChB,SAAS,EAAEE,QAAQ,EAAEC,MAAM,CAAC;MACpD,CAAC,CAAC;IACN;EACF;AACF;AAAC;AAED,MAAMc,eAAe,GAAG,CAACC,OAAO,EAAEC,SAAS,EAAEC,MAAM,KAAK;EACtD,IAAIN,SAAS,GAAGV,QAAQ,CAACG,cAAc,CAAC,YAAY,CAAC;EACrDO,SAAS,CAACO,YAAY,CAAC,YAAY,EAAEF,SAAS,CAAC;EAC/CL,SAAS,CAACO,YAAY,CAAC,OAAO,EAAEF,SAAS,CAAC;EAC1C,IAAIG,aAAa,GAAGlB,QAAQ,CAACG,cAAc,CAAC,iBAAiB,CAAC;EAC9De,aAAa,CAACT,SAAS,GAAGK,OAAO;EACjCK,aAAa,CAACH,MAAM,CAAC;AACvB,CAAC;AAED,MAAMI,cAAc,GAAIC,cAAc,IAAK;EACzCf,MAAM,CAACgB,SAAS,CAACC,WAAW,CAAC;IAC3BC,GAAG,EAAE,CAAC,eAAe,EAAEC,kBAAkB,CAACJ,cAAc,CAAC;EAC3D,CAAC,CAAC;AACJ,CAAC"},"metadata":{},"sourceType":"script","externalDependencies":[]}