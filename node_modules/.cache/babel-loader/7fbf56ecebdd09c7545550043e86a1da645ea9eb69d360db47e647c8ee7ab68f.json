{"ast":null,"code":"import { createApp } from \"vue\";\nimport App from \"../view/striff-report.vue\";\nimport LoadScript from \"vue-plugin-load-script\";\nconst app = createApp(App);\nconst STRIFF_API_URL = \"http://localhost:8080/v1/github/striffs\";\napp.use(LoadScript);\napp.mount(\"#app\");\nexport function getPRInfo() {\n  return new Promise((Resolve, reject) => {\n    chrome.runtime.sendMessage({\n      msg: [\"getPRInfo\"]\n    }, function (prInfoObj) {\n      if (Object.keys(prInfoObj).length === 0) {\n        reject(new Error(\"Oops! An internal error occurred while fetching Pull Request data from GitHub.\"));\n      } else {\n        Resolve(prInfoObj);\n      }\n    });\n  });\n}\nexport function fetchStriff(prInfoObj) {\n  console.log(prInfoObj);\n  return new Promise((Resolve, reject) => {\n    var striffReqURL = STRIFF_API_URL + \"/owners/\" + prInfoObj[\"repoOwner\"] + \"/repos/\" + prInfoObj[\"repoName\"] + \"/pulls/\" + prInfoObj[\"pullNo\"] + \"?gh_hostname=\" + prInfoObj[\"ghHost\"];\n    const request = new Request(encodeURI(striffReqURL));\n    const headerObj = {\n      Accept: \"application/json\",\n      Authorization: \"token \" + prInfoObj[\"token\"]\n    };\n    console.log(request);\n    fetch(request, {\n      method: \"GET\",\n      headers: headerObj\n    }).then(response => Resolve(response.json())).catch(function (err) {\n      reject(new Error(err));\n    });\n  });\n}\nexport function handleErrors(striffAPIResp) {\n  console.log(striffAPIResp);\n  return new Promise((Resolve, reject) => {\n    if (striffAPIResp.status > 200) {\n      reject(new Error(striffAPIResp.body.errorMessage));\n    } else if (\"striffs\" in striffAPIResp.body && Object.keys(striffAPIResp.body.striffs).length > 0) {\n      Resolve(striffAPIResp.body);\n    } else {\n      reject(new Error(\"No striffs were generated for this Pull Request.\"));\n    }\n  });\n}\nexport function processStriffResponse(response) {\n  return new Promise((Resolve, reject) => {\n    if (response.status > 200) {\n      reject(new Error(response.body.errorMessage));\n    } else {\n      if (\"striffs\" in response.body && Object.keys(response.body.striffsMap).length > 0) {\n        Resolve(response.body);\n      } else {\n        // No structural changes found\n        reject(new Error(\"No structural changes were found!\"));\n      }\n    }\n    document.getElementById(\"striff_btn\").disabled = true;\n  });\n}","map":{"version":3,"names":["createApp","App","LoadScript","app","STRIFF_API_URL","use","mount","getPRInfo","Promise","Resolve","reject","chrome","runtime","sendMessage","msg","prInfoObj","Object","keys","length","Error","fetchStriff","console","log","striffReqURL","request","Request","encodeURI","headerObj","Accept","Authorization","fetch","method","headers","then","response","json","catch","err","handleErrors","striffAPIResp","status","body","errorMessage","striffs","processStriffResponse","striffsMap","document","getElementById","disabled"],"sources":["/home/muntazir/git/hadii/striff-browser-extension/src/entry/striff-report.js"],"sourcesContent":["import { createApp } from \"vue\";\nimport App from \"../view/striff-report.vue\";\nimport LoadScript from \"vue-plugin-load-script\";\n\nconst app = createApp(App);\nconst STRIFF_API_URL = \"http://localhost:8080/v1/github/striffs\";\n\napp.use(LoadScript);\napp.mount(\"#app\");\n\nexport function getPRInfo() {\n  return new Promise((Resolve, reject) => {\n    chrome.runtime.sendMessage({ msg: [\"getPRInfo\"] }, function (prInfoObj) {\n      if (Object.keys(prInfoObj).length === 0) {\n        reject(\n          new Error(\n            \"Oops! An internal error occurred while fetching Pull Request data from GitHub.\"\n          )\n        );\n      } else {\n        Resolve(prInfoObj);\n      }\n    });\n  });\n}\n\nexport function fetchStriff(prInfoObj) {\n  console.log(prInfoObj);\n  return new Promise((Resolve, reject) => {\n    var striffReqURL =\n      STRIFF_API_URL +\n      \"/owners/\" +\n      prInfoObj[\"repoOwner\"] +\n      \"/repos/\" +\n      prInfoObj[\"repoName\"] +\n      \"/pulls/\" +\n      prInfoObj[\"pullNo\"] +\n      \"?gh_hostname=\" +\n      prInfoObj[\"ghHost\"];\n    const request = new Request(encodeURI(striffReqURL));\n    const headerObj = {\n      Accept: \"application/json\",\n      Authorization: \"token \" + prInfoObj[\"token\"],\n    };\n    console.log(request);\n    fetch(request, {\n      method: \"GET\",\n      headers: headerObj,\n    })\n      .then((response) => Resolve(response.json()))\n      .catch(function (err) {\n        reject(new Error(err));\n      });\n  });\n}\n\nexport function handleErrors(striffAPIResp) {\n  console.log(striffAPIResp);\n  return new Promise((Resolve, reject) => {\n    if (striffAPIResp.status > 200) {\n      reject(new Error(striffAPIResp.body.errorMessage));\n    } else if (\n      \"striffs\" in striffAPIResp.body &&\n      Object.keys(striffAPIResp.body.striffs).length > 0\n    ) {\n      Resolve(striffAPIResp.body);\n    } else {\n        reject(new Error(\"No striffs were generated for this Pull Request.\"))\n    }\n  });\n}\n\nexport function processStriffResponse(response) {\n  return new Promise((Resolve, reject) => {\n    if (response.status > 200) {\n      reject(new Error(response.body.errorMessage));\n    } else {\n      if (\n        \"striffs\" in response.body &&\n        Object.keys(response.body.striffsMap).length > 0\n      ) {\n        Resolve(response.body);\n      } else {\n        // No structural changes found\n        reject(new Error(\"No structural changes were found!\"));\n      }\n    }\n    document.getElementById(\"striff_btn\").disabled = true;\n  });\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}